## Chapter3 성능 측정
#### 소프트웨어 제작사들이 **시간 측정**을 위해 만든 도구
1. 프로파일러
   - 일반적으로 컴파일러 제작사가 컴파일러와 함께 제공한다.
   - 프로그램 실행 중에 호출된 각 함수를 수행하는 데 걸린 누적 시간을 표로 정리한 뒤 보고서를 작성해 준다.
2. 소프트웨어 타이머
   - 개발자가 만들 수 있는 도구
   - 계산에 구속되지 않는 시간 측정에도 유용하다.
1. 노트
   - 구식이지만 없어서는 안 될 중요한 도구

## 3.1 사고방식 최적화
### 3.1.1 성능은 반드시 측정해야 합니다
- 최적화가 끝났다고 생각했던 코드를 더 효율적인 코드로 바꿀 수도 있고 최적화가 제대로 되지 않았다고 생각했는데 가장 최적화가 잘된 코드였을수도 있다.
  - 측정만이 최적화 게임의 승패를 알려준다.
- 테스트 가능한 **예측**을 만들고 적어둔다.
- 코드 변경 사항을 **기록**한다.
- 사용 가능한 **최고의 측정기**로 측정한다.
- 실험 결과의 자세한 내용을 **보관**한다.

### 3.1.2 최적화를 하는 사람은 맹수 사냥꾼입니다
- 속도가 빨라졌다고 하려면 **무작위화**, **샘플링**, **신뢰 수준**으로 입증해야 한다.
- 성능 개선은 운영체제나 컴파일러 같은 요소에 따라 달라질 수 있다.
  - 시스템이 바뀌거나 시간이 흐르면서 큰 영향을 미치지 않을 수도 있다.
  - 극적으로 개선된 성능은 코드를 새로운 시스템으로 이식하더라도 저하되는 일이 없다.

### 3.1.3 90/10 규칙
- 프로그램 코드의 `10%`가 실행 시간의 `90%`를 소비한다
- 특정 코드 블록이 매우 빈번하게 실행되며 코드의 다른 부분은 거의 실행되지 않는다.
- 최적화를 하려면 자주 실행되는 `10%`가 어딘지 찾아야 한다.

### 3.1.4 암달의 법칙
- 코드의 일부를 최적화 할 때 전반적인 성능이 얼마나 향상되었는지 설명하는 법칙

![암달](https://user-images.githubusercontent.com/21440957/78467487-51167b80-7748-11ea-802b-228ddf3a656f.PNG)
- S<sub>t</sub> : 최적화로 프로그램 전체 실행 시간이 얼마나 개선되었는지 나타내는 비율
- P : 최적화할 부분이 기존 프로그램 전체 실행 시간에서 차지하는 비율
- S<sub>p</sub> : P에서 최적화로 얼마나 개선되었는지 나타내는 비율

## 3.2 실험 수행
### 3.2.1 연구 노트를 보관하세요  
- 각 테스트를 **문서화**하면 반복 수행을 빠르게 할 수 있다.
- **문서화** 하지 않았다면 이전 실험을 다시 수행해 실행 결과를 얻어야 한다.

### 3.2.2 성능 측정 기준과 목표 설정
#### 최적화와 관련된 두가지 지표
  1. 최적화 이전의 성능 축정 기준
     - 성능 개선을 시도할 때마다 성공 여부를 가려준다.
     - 이해 당사자에게 최적화에 쓰이는 비용의 정당성을 이해시키는데 중요한 지표가 된다.
  2. 성능 목표
      - 최적화는 노력에 대한 보상이 점점 줄어드는 과정이므로 성능 목표를 설정하는 것이 중요하다.

#### 최적화 관련 수치
1. 시작 시간
    - 일반적으로 `main()` 프로시저에 들어가는 시점부터 `main` 루프에 들어가는 시점
2. 종료 시간
    - 사용자가 닫기 아이콘을 클릭하거나 명령을 입력한 후부터 프로세스가 실제로 종료될 때까지 걸린 시간
    - 메인 윈도우가 종료 명령을 받는 시점부터 main() 함수를 빠져나오는 시점까지의 경과 시간
3. 응답 시간
    - 평균 시간 또는 최악의 경우를 고려한 시간
    - 응답 시간은 10의 거듭제곱 단위로 분류할 수 있다.
        - 0.1초 미만 : 사용자가 직접적인 제어권을 가짐
        - 0.1초 ~ 1초 : 사용자가 제어권을 가짐
        - 1 ~ 10초 : 컴퓨터에 제어권이 있음
        - 10초 이상 : 커피 마실 시간
4. 처리량
    - `응답 시간`의 역수
    - 테스트 작업량 일부에 대한 단위 시간당 평균 작업 수

### 3.2.3 측정한 것만 개선할 수 있습니다.
- 단일 함수, 서브 시스템, 태스크, 테스트 케이스를 최적화 하는 것과 전체 프로그램의 성능을 향상하는 것은 전혀 다른 작업이다.
- **컴퓨터 환경**에 따라 테스트 설정이 달라지기 때문에 테스트에서 성능 향상을 보아도 실전에서 **동일한 성능 향상을 장담하는 경우**는 거의 없다.